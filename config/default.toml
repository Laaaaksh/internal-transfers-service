# Internal Transfers Service - Default Configuration
# This file contains base configuration values.
# Environment-specific files (dev.toml, test.toml, prod.toml) override these values.

[app]
env = "${APP_ENV:-dev}"
name = "internal-transfers-service"
port = ":8080"
ops_port = ":8081"
shutdown_delay = 5
shutdown_timeout = 30

[database]
host = "${DB_HOST:-localhost}"
port = 5432
user = "${DB_USER:-postgres}"
password = "${DB_PASSWORD:-postgres}"
name = "${DB_NAME:-transfers}"
ssl_mode = "disable"
max_connections = 25
min_connections = 5
max_conn_lifetime = "1h"
max_conn_idle_time = "30m"

[database.retry]
# Retry configuration for database connection on startup
enabled = true
max_retries = 5
initial_backoff = "1s"
max_backoff = "30s"

[logging]
level = "info"
format = "json"

[metrics]
enabled = true
path = "/metrics"

[idempotency]
ttl = "24h"

[security]
# CORS origin - use specific origin in production, "*" for development
cors_allow_origin = "${CORS_ALLOW_ORIGIN:-*}"

[rate_limit]
# Rate limiting configuration
# Token bucket algorithm: allows bursts while enforcing average rate
enabled = true
requests_per_second = 100.0
burst_size = 200

[tracing]
# OpenTelemetry distributed tracing configuration
# Set enabled = true and configure endpoint to enable tracing
enabled = false
endpoint = "${OTEL_EXPORTER_OTLP_ENDPOINT:-localhost:4317}"
service_name = "internal-transfers-service"
sample_rate = 1.0
insecure = true
batch_timeout = "5s"
